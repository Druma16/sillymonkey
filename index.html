<!DOCTYPE html>
<html>
<head>
  <title>Item Lookup</title>
  <link rel="stylesheet" href="styles.css">
<!--  <style>-->
<!--    #results-list li[data-id="2"] h3 {-->
<!--      color: red;-->
<!--    }-->
<!--  </style>-->
</head>
<body>
  <header>
    <h1>Item Lookup</h1>
  </header>
<!--  Minimum responsive according to AI -->
  <div class="container">
    <section class="search-section">
      <label for="search-input">Search for an item:</label>
      <input type="text" id="search-input" placeholder="Enter item name">
      <button id="search-button">Search</button>
    </section>

    <section class="results-section">
      <h2>Results:</h2>
      <ul id="results-list"></ul>
    </section>
  </div>
  <script>

    // Function to handle the lookup
    let itemData = null; // placeholder for caching data

    function lookupItem() {
        const searchInput = document.getElementById('search-input').value.toLowerCase();
        const resultsList = document.getElementById('results-list');
        resultsList.innerHTML = '';

        // get the data to use if not cached already
        if (!itemData) {
            fetch('data.json')
                .then(response => response.json())
                .then(data => {
                    itemData = data; // Cache the data
                    processSearch(searchInput);
                })
                .catch(error => {
                    console.error('Error fetching data:', error);
                });
        } else{
            processSearch(searchInput);
        }
    } // end lookupItem

    function processSearch(searchInput) {
        // Find the matches
        const matchingItems = itemData.filter(item => item.name.toLowerCase().includes(searchInput));

        // Convert matches to display elements (list)
        if (matchingItems.length > 0) {
            matchingItems.forEach(item => {
                const listItem = document.createElement('li');
                // add some attribute for css style matching
                listItem.setAttribute('data-id', item.id);
                listItem.innerHTML = `
                    <h3>${item.name}</h3>
                    <p>${item.description}</p>
                    <p>Category: ${item.category}</p>
                    <p>Price: $${item.price.toFixed(2)}</p>
                `;
                resultsList.appendChild(listItem);
            });
        } else {
            const listItem = document.createElement('li');
            listItem.textContent = 'No items found.';
            resultsList.appendChild(listItem);
        }
    } // end processSearch


    // Add event listener to the search button
    document.getElementById('search-button').addEventListener('click', lookupItem);
  </script>
</body>
</html>